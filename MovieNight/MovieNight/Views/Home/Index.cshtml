@{
    ViewData["Title"] = "Home Page";
  
}
@using MovieNight.Models.ModelView;

@model IndexViewModel 

   

<div class="container">
    <div class="text-center text-md-center" style="margin-top:20%">
        <form asp-controller="Home" asp-action="CreateRoom" method="post"  class="text-center">
            <button type="submit" class=" btn-lg btn-primary" style="margin-right:15%; background:#59b723; transform:scale(2 , 2);border:none">Create Lobby</button>
            <button type="button" onclick="appear()" class=" btn-secondary btn-lg" style="transform:scale(2 ,2);border:none">Join Lobby</button>
        </form>
    </div>
    
    <div style="margin-top:10%;display:none" id="lobbies"  class="text-center">
        @foreach (var c in Model.ChatRooms)
        {
            <div class="text-center d-inline-block" style="border-radius:15px;background:rgba(0, 0, 0, 0.5); min-width:15%; min-height:150px;">
                <p class="text-white" style="margin-top:6%">IDS: @c.Id</p>
                <p class="text-white">Name: @c.OwnerName</p>
                <form action="Home/JoinRoom/@c.Id" method="get">
                <button type="submit" name="Id" class="text-white" style="border-radius:5px; background:gray; border:none; width:50%;margin-bottom:10px">Join</button>
                </form>
            </div>
        }


    </div>

</div>

<ul id="dblist"></ul>




<script>

    function appear() {
        var el = document.getElementById('lobbies');
        if (el.style.display == "none")
            el.style.display = "inline-block";
        else 
            el.style.display = "none";

    }

    function apii() {
        var ul = document.getElementById("dblist");
        ul.innerHTML =''
        fetch("api/all", {
            method: "Get"
        }).then(x => x.json())
            .then(x => {
                for (var i = 0; i < x.length; i++) {
                    var li = document.createElement("li");
                    li.textContent = x[i].userName;
                    li.style = "color:white";
                    ul.appendChild(li);
                }
            
            })
    }
</script>